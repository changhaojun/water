<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="../plugins/layer/layui/css/layui.css"  media="all">
  <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
  <style>
  	#biuuu_city_list li{
  		background:#1DB495;
  		width:100px;
  		height:20px;
  		float:left;
  		margin-left:20px;
  		margin-top:20px;
  	}
  	
  </style>
</head>
<body>
            

<div id="demo8"></div>
 
<ul id="biuuu_city_list"></ul>              
<script src="../plugins/jQuery/jquery-1.11.3.min.js" type="text/javascript" charset="utf-8"></script>    
<script src="../plugins/layer/layui/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
layui.use(['laypage', 'layer'], function(){
  var laypage = layui.laypage
  ,layer = layui.layer;
  
  
  
  //将一段数组分页展示
  
  //测试数据
  var data = [
    '北京',
    '上海',
    '广州',
    '深圳',
    '杭州',
    '长沙',
    '合肥',
    '宁夏',
    '成都',
    '西安',
    '南昌',
    '上饶',
    '沈阳',
    '济南',
    '厦门',
    '福州',
    '九江',
    '宜春',
    '赣州',
    '宁波',
    '绍兴',
    '无锡',
    '苏州',
    '徐州',
    '东莞',
    '佛山',
    '中山',
    '成都',
    '武汉',
    '青岛',
    '天津',
    '重庆',
    '南京',
    '九江',
    '香港',
    '澳门',
    '台北'
  ];
  
  var nums = 10; //每页出现的数据量
  
  //模拟渲染
  var render = function(curr){
    //此处只是演示，实际场景通常是返回已经当前页已经分组好的数据
    var str = '', last = curr*nums - 1;
    last = last >= data.length ? (data.length-1) : last;
    for(var i = (curr*nums - nums); i <= last; i++){
      str += '<li onclick="aa('+i+')" id="'+i+'">'+ data[i] +'</li>';
    }
    return str;
  };
 
  //调用分页
  laypage({
    cont: 'demo8'
    ,pages: Math.ceil(data.length/nums) //得到总页数
    ,jump: function(obj){
      document.getElementById('biuuu_city_list').innerHTML = render(obj.curr);
    }
  });
  
});
 function aa(i){
 	console.log($("#i").attr("id"))
  	 $.ajax({
				url:"http://rapapi.org/mockjsdata/15031/things/{_id}/thingDatas",
	
				dataType: 'JSON',
				type: 'POST',
				async:"true",
				crossDomain: true == !(document.all),
				success: function(data) {
					console.log(data);
					if(data.code==200){
						layer.msg(data.success, {
							icon : 1
						});
						$("#i").css("color","#C1C1C1")
	//					window.top.MQTTconnect(guid);
					}else{
						layer.msg('添加失败', {
							icon : 2
						});
					}
				},
				error: function(XMLHttpRequest, textStatus, errorThrown) {
					layer.msg('添加失败', {
						icon : 2
					});
			    }
			});
  }
</script>

</body>
</html>
